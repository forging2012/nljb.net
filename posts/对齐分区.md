---
title: 对齐分区
date: '2014-08-06'
description:
categories:

tags:system

---

使用 fdisk 的另一种方法是通过 

	fdisk -H 224 -S 56 /dev/sda 启动它

这会更改 cylinder/head/sector (CHS) 几何参数

从而确保在将程序与柱面对齐时有合理的 4096 字节对齐，这也是默认情形。

>

fdisk 系列是大多数 util-linux-ng 分发包附带的一部分

支持直接编辑 MBR 数据结构，但它不能创建或修改文件系统。

通过 util-linux-ng 2.17，fdisk 对分区的 8 扇区对齐不提供任何直接支持。

通过 2.17.2 及其以上版本（我写本文时是最新版本），默认对齐仍然是基于柱面的。

>

不过，您可以使用任何版本的 fdisk 合理对齐分区。

为此，您应该在主菜单输入 u ， 将默认单元从柱面更改为扇区。

然后输入初始扇区值，应为 8 的倍数。

在理论上，为实现合理对齐，您可以将第一个分区的扇区数设为 8；

>

但是，最好将第一个分区设置为 64 或更高的值，

为 MBR 与第一个分区之间的未分配空间中的装载引导程序代码留出空间。

>

Microsoft 面向 Windows Vista 和 Windows 7 的分区工具将第一个分区起始于扇区 2048，

从跨平台角度来讲，这里是开始分区的安全地带。

事实上，从 util-linux-ng 2.17.1 开始

当您通过在主菜单输入 c 来禁用 DOS 兼容性模式时，这就是默认设置。我建议保持该设置。

>

但是，要注意，fdisk 不自动对齐随后的分区。

如果您指定以兆字节或更大字节为单位的分区大小，然后接受随后分区的默认值，

随后的分区可能会被对齐，但这不一定。

>

出于安全考虑， 您不应检验以 8 的倍数为初始值的每个分区。
